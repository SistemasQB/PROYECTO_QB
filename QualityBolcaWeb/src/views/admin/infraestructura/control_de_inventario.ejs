<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Inventario - Quality Bolca</title>
    
    <link rel="stylesheet" href="/styles/infraestructura/estilos_control_de_inventario.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <%- include('partials/menu-hamburguesa.ejs')%>
    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1>Control de Inventario</h1>
                <p>Gestiona y controla el stock de todos tus productos</p>
            </div>

            <!-- Inventory Stats -->
            <div class="inventory-stats">
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-title">Total Productos</span>
                        <i class="fas fa-boxes stat-icon"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">1,247</div>
                        <p class="stat-change positive">+15 nuevos productos</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-title">Stock Bajo</span>
                        <i class="fas fa-exclamation-triangle stat-icon warning"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">5</div>
                        <p class="stat-change negative">Requiere reposición</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-title">Valor Total</span>
                        <i class="fas fa-dollar-sign stat-icon"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">$89,450</div>
                        <p class="stat-change positive">+5% este mes</p>
                    </div>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="search-section">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="inventorySearch" placeholder="Buscar productos..." onkeyup="filterInventory()">
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterByStatus('all')">Todos</button>
                    <button class="filter-btn" onclick="filterByStatus('low')">Stock Bajo</button>
                    <button class="filter-btn" onclick="filterByStatus('out')">Agotado</button>
                </div>
                <button class="btn-primary" onclick="openAddProductModal()">
                    <i class="fas fa-plus"></i>
                    Agregar Producto
                </button>
            </div>

            <!-- Inventory Table -->
            <div class="table-container">
                <table class="inventory-table" id="inventoryTable">
                    <thead>
                        <tr>
                            <th>Código</th>
                            <th>Producto</th>
                            <th>Categoría</th>
                            <th>Stock Actual</th>
                            <th>Stock Mínimo</th>
                            <th>Precio Unitario</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-status="low">
                            <td>TOR-M8-001</td>
                            <td>Tornillos M8 x 20mm</td>
                            <td>Ferretería</td>
                            <td class="stock-low">5</td>
                            <td>50</td>
                            <td>$0.25</td>
                            <td><span class="status-badge warning">Stock Bajo</span></td>
                            <td class="actions-cell">
                                <button class="action-btn edit" onclick="editProduct(1)" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn add-stock" onclick="addStock(1)" title="Agregar Stock">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="action-btn delete" onclick="deleteProduct(1)" title="Eliminar">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr data-status="normal">
                            <td>CAB-RJ45-002</td>
                            <td>Cable RJ45 Cat6</td>
                            <td>Electrónicos</td>
                            <td class="stock-normal">150</td>
                            <td>20</td>
                            <td>$2.50</td>
                            <td><span class="status-badge success">Normal</span></td>
                            <td class="actions-cell">
                                <button class="action-btn edit" onclick="editProduct(2)" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn add-stock" onclick="addStock(2)" title="Agregar Stock">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="action-btn delete" onclick="deleteProduct(2)" title="Eliminar">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr data-status="out">
                            <td>HER-TAL-003</td>
                            <td>Taladro Industrial</td>
                            <td>Herramientas</td>
                            <td class="stock-out">0</td>
                            <td>5</td>
                            <td>$125.00</td>
                            <td><span class="status-badge danger">Agotado</span></td>
                            <td class="actions-cell">
                                <button class="action-btn edit" onclick="editProduct(3)" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn add-stock" onclick="addStock(3)" title="Agregar Stock">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="action-btn delete" onclick="deleteProduct(3)" title="Eliminar">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr data-status="normal">
                            <td>TUE-M8-004</td>
                            <td>Tuercas M8</td>
                            <td>Ferretería</td>
                            <td class="stock-normal">200</td>
                            <td>100</td>
                            <td>$0.15</td>
                            <td><span class="status-badge success">Normal</span></td>
                            <td class="actions-cell">
                                <button class="action-btn edit" onclick="editProduct(4)" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn add-stock" onclick="addStock(4)" title="Agregar Stock">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="action-btn delete" onclick="deleteProduct(4)" title="Eliminar">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Add Stock Modal -->
    <div class="modal" id="addStockModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Agregar Stock</h3>
                <button class="close-btn" onclick="closeAddStockModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="modal-form" id="addStockForm">
                <div class="form-group">
                    <label for="productName">Producto:</label>
                    <input type="text" id="productName" readonly>
                </div>
                <div class="form-group">
                    <label for="currentStock">Stock Actual:</label>
                    <input type="number" id="currentStock" readonly>
                </div>
                <div class="form-group">
                    <label for="addQuantity">Cantidad a Agregar:</label>
                    <input type="number" id="addQuantity" min="1" required>
                </div>
                <div class="form-group">
                    <label for="reason">Motivo:</label>
                    <select id="reason" required>
                        <option value="">Seleccionar motivo</option>
                        <option value="compra">Nueva compra</option>
                        <option value="devolucion">Devolución</option>
                        <option value="ajuste">Ajuste de inventario</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeAddStockModal()">Cancelar</button>
                    <button type="submit" class="btn-primary">Agregar Stock</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/scripts/infraestructura/scripts_global.js"></script>
    <script src="/scripts/infraestructura/scripts_control_de_inventario.js"></script>
</body>
</html>
