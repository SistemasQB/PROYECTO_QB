<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Colaboradores</title>
    <link rel="stylesheet" href="../styles/sistemas/listadopersonal.css">
</head>


<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <div class="logo">
                    <img src="../img/Quality-BOLCA.png" style="width: 100%;" alt="" srcset="">
                </div>
                <h1>Listado de Personal</h1>
            </div>
            <nav class="nav">
                <button class="nav-btn active">Colaboradores</button>
                <button class="nav-btn">Inventario</button>
                <button class="nav-btn">Tickets</button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Search Bar -->
        <div class="search-container">
            <div class="search-box">
                <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
                    <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" />
                </svg>
                <input type="text" id="searchInput" placeholder="Buscar colaboradores..." class="search-input">
            </div>

            <button id="btnCrearVale" class="btn-crear-vale">
                Crear Vale
            </button>
        </div>

        <!-- Colaboradores Grid -->
        <div id="colaboradoresGrid" class="grid">
            <!-- Las tarjetas se generarán dinámicamente con JavaScript -->

            <% for (const [key, datos] of Object.entries(personal2)) { %>
                <div class="card">
                    <div class="card-header">
                        <div class="card-user-info">
                            <div class="user-avatar">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                            <div class="user-details">
                                <h3 class="user-name">
                                    <%= datos.nombrelargo %>
                                </h3>
                                <p class="user-position">
                                    <%=datos.descripcion %>
                                </p>
                                <p class="user-position">
                                    Folio: 
                                    <span><%=datos.folio %></span>
                                </p>
                                <p class="user-position">
                                    Num. Empleado:
                                    <span><%=datos.numeroEmpleado %></span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="card-content">
                        <% if (datos.firma) { %>
                        <div class="status-badge">
                            Firmado
                        </div>
                        <% } else { %>
                        <div class="status-badge2">
                            No Firmado
                        </div>
                        <% } %>
                        <div class="button-grid">
                            <!-- <button class="btn btn-outline" onclick="showModal2('<%= JSON.stringify(datos) %>')">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                M. Preventivo
                            </button>
                            <button class="btn btn-outline" onclick="showModal3('<%= JSON.stringify(datos) %>')">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                M. Autonomo
                            </button> -->
                            <button class="btn btn-outline" onclick="showModal('<%= JSON.stringify(datos) %>')">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Vale Asiganción
                            </button>
                            <button class="btn btn-outline btn-agregar" data-folio="<%= datos.folio %>" data-datos='<%= JSON.stringify(datos) %>'>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Añadir
                            </button>
                            <button class="btn btn-outline btn-remover" data-folio="<%= datos.folio %>" data-datos='<%= JSON.stringify(datos) %>'>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Remover
                            </button>
                            <button class="btn btn-destructive btn-dar-baja" data-id="<%= datos.folio %>" data-datos="<%= JSON.stringify(datos) %>">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <line x1="17" y1="8" x2="22" y2="13" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <line x1="22" y1="8" x2="17" y2="13" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Dar Baja
                            </button>
                        </div>
                    </div>
                </div>
                <% } %>
        </div>
    </main>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalBody" class="modal-body">
                <!-- El contenido del modal se generará dinámicamente -->
            </div>
        </div>
    </div>

    <input type="hidden" id="csrfToken" value="<%= csrfToken %>">
    <script src="../scripts/sistemas/listadopersonal.js"></script>

    <script>
    const buscador = document.getElementById("searchInput")

    buscador.addEventListener("search", e => {
        e.target.value = ""
        document.querySelectorAll(".card").forEach(fruta => {

    fruta.textContent.toLowerCase().includes(e.target.value.toLowerCase())
    ? fruta.classList.remove("hidden")
    : fruta.classList.add("hidden")
    })
    })

    buscador.addEventListener("keyup", e => {


            if (e.key === "Escape") e.target.value = ""


            document.querySelectorAll(".card").forEach(fruta => {

                fruta.textContent.toLowerCase().includes(e.target.value.toLowerCase())
                    ? fruta.classList.remove("hidden")
                    : fruta.classList.add("hidden")
            })
    })
    </script>
</body>


</html>