<body>
    <nav class="main-nav">
        <div class="container">
            <ul class="nav-tabs">
                <li class="nav-item">
                    <a href="#tab-registro" class="nav-link active" data-tab="tab-registro">Registro de Personal</a>
                </li>
                <li class="nav-item">
                    <a href="#tab-acta" class="nav-link" data-tab="tab-acta">Acta Administrativa</a>
                </li>
                <li class="nav-item">
                    <a href="#tab-baja" class="nav-link" data-tab="tab-baja">Baja de Personal</a>
                </li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <!-- Tab 1: Registro de Personal -->
            <div id="tab-registro" class="tab-content active">
                <div class="card">
                    <form id="registrationForm">
                        <div class="card-header">
                            <h2 class="card-title">Formulario de Registro de Personal</h2>
                            <p class="card-description">Complete todos los campos con la información solicitada</p>
                        </div>
                        <div class="card-content">
                            <input type="hidden" name="_csrf" value="<%=csrfToken%>">
                            <div class="form-sections">
                                <!-- Sección de Información Personal -->
                                <div class="form-section">
                                    <h2 class="section-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="icon">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M12 16v-4"></path>
                                            <path d="M12 8h.01"></path>
                                        </svg>
                                        Información Personal
                                    </h2>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="curp">CURP</label>
                                            <input type="text" id="curp" name="curp" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="numeroSeguro">Numero de Seguro Social</label>
                                            <input type="text" id="numeroSeguro" name="nss" placeholder="12345678901"
                                                maxlength="11" required minlength="11">
                                        </div>
                                        <div class="form-group">
                                            <label for="cp_domicilio">CP (domicilio)</label>
                                            <input type="text" id="cp_domicilio" placeholder="20000" name="cp"
                                                maxlength="5" required minlength="5">
                                        </div>
                                        <div class="form-group">
                                            <label for="estado_nacimiento">Estado Nacimiento</label>
                                            <input type="text" id="estado_nacimiento" value="VERACRUZ"
                                                name="estadoNacimiento" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="fecha_nacimiento">Fecha Nacimiento</label>
                                            <input type="date" id="fecha_nacimiento" class="date-input"
                                                name="fechanacimiento" value="1993-06-25" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Género</label>
                                            <div class="radio-group">
                                                <div class="radio-item">
                                                    <input type="radio" id="masculino" name="genero" value="1" required>
                                                    <label for="masculino">Masculino</label>
                                                </div>
                                                <div class="radio-item">
                                                    <input type="radio" id="femenino" name="genero" value="2" required>
                                                    <label for="femenino">Femenino</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="fecha_alta">Fecha de Alta</label>
                                            <input type="date" id="fecha_alta" class="date-input" name="fechaAlta"
                                                required>
                                                <span id="mensajeError" style="color: red; display: none;">Fecha fuera del rango permitido.</span>
                                        </div>
                                        <div class="form-group">
                                            <label for="nombre">Nombre(s)</label>
                                            <input type="text" id="nombre" name="nombre">
                                        </div>
                                        <div class="form-group">
                                            <label for="apellido_paterno">Apellido Paterno</label>
                                            <input type="text" id="apellido_paterno" name="apellidoPaterno">
                                        </div>
                                        <div class="form-group">
                                            <label for="apellido_materno">Apellido Materno</label>
                                            <input type="text" id="apellido_materno" name="apellidoMaterno">
                                        </div>
                                        <div class="form-group form-group-wide">
                                            <label for="direccion">Dirección (calle y número)</label>
                                            <input type="text" id="direccion" name="direccion">
                                        </div>
                                        <div class="form-group">
                                            <label for="municipio">Municipio</label>
                                            <input type="text" id="municipio" name="municipio">
                                        </div>
                                        <div class="form-group">
                                            <label for="colonia">Colonia</label>
                                            <select id="colonia" name="colonia">
                                                <option value="" selected disabled>Seleccionar colonia</option>
                                                <!-- <option value="centro">Centro</option>
                                                <option value="reforma">Reforma</option>
                                                <option value="juarez">Juárez</option> -->
                                            </select>
                                        </div>
                                        <!-- Resto de los campos del formulario original... -->
                                        <div class="form-group">
                                            <label for="telefono">Teléfono</label>
                                            <input type="tel" id="telefono" name="telefono">
                                        </div>
                                        <div class="form-group">
                                            <label for="estado_domicilio">Estado del Domicilio</label>
                                            <input type="text" id="estado_domicilio" name="estadoDomicilio">
                                        </div>
                                        <div class="form-group">
                                            <label for="edo_civil">Edo. Civil</label>
                                            <select id="edo_civil" name="estadoCivil">
                                                <option value="soltero" selected>SOLTERO</option>
                                                <option value="casado">CASADO</option>
                                                <option value="divorciado">DIVORCIADO</option>
                                                <option value="viudo">VIUDO</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="correo">Correo Electronico</label>
                                            <input type="email" id="correo" name="correo">
                                        </div>
                                    </div>
                                </div>

                                <!-- Sección de Información Laboral -->
                                <div class="form-section">
                                    <h2 class="section-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="icon">
                                            <path
                                                d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z">
                                            </path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                        </svg>
                                        Información Laboral
                                    </h2>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="dropdown1">Proceso</label>
                                            <select id="dropdown1" required name="proceso">
                                                <option value="" disabled selected>Seleccione una opción</option>
                                                <option value="ADMINISTRACION Y FINANZAS">ADMINISTRACION Y FINANZAS
                                                </option>
                                                <option value="COMERCIALIZACION Y VENTA">COMERCIALIZACION Y VENTAS
                                                </option>
                                                <option value="CONTROL Y MEJORA DEL SERVICIO">CONTROL Y MEJORA DEL
                                                    SERVICIO</option>
                                                <option value="EJECUCION DEL SERVICIO">EJECUCION DEL SERVICIO</option>
                                                <option value="GESTION DE CAPITAL HUMANO">GESTION DE CAPITAL HUMANO
                                                </option>
                                                <option value="GESTION DE INFRAESTRUCTURA">GESTION DE INFRAESTRUCTURA
                                                </option>
                                                <option value="PLANEACION DEL SERVICIO">PLANEACION DEL SERVICIO</option>
                                                <option value="PLANEACION Y DIRECCION ESTRATEGICA">PLANEACION Y
                                                    DIRECCION ESTRATEGICA
                                                </option>
                                                <option value="SISTEMA DE GESTION DE CALIDAD">SISTEMA DE GESTION DE
                                                    CALIDAD</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="dropdown2">Departamento</label>
                                            <select id="dropdown2" disabled name="departamento">
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="dropdown3">Puesto</label>
                                            <select id="dropdown3" required disabled>
                                                <option value="" disabled selected>Seleccione una opción</option>
                                                <option value="JEFE">JEFE</option>
                                                <option value="ANALISTA">ANALISTA</option>
                                                <option value="AUXILIAR">AUXILIAR</option>
                                                <option value="BECARIO">BECARIO</option>
                                                <option value="GERENTE DE ADMINISTRACION">GERENTE DE ADMINISTRACION
                                                </option>
                                                <option value="DIRECTOR DE ADMINISTRACION">DIRECTOR DE ADMINISTRACION
                                                </option>
                                                <option value="DIRECTOR DE CAPITAL HUMANO">DIRECTOR DE CAPITAL HUMANO
                                                </option>
                                                <option value="GERENTE NACIONAL DE SORTEO">GERENTE NACIONAL DE SORTEO
                                                </option>
                                                <option value="GERENTE REGIONAL DE SORTEO">GERENTE REGIONAL DE SORTEO
                                                </option>
                                                <option value="GERENTE COMERCIALIZACION Y VENTAS">GERENTE
                                                    COMERCIALIZACION Y VENTAS</option>
                                                <option value="SUPERVISOR REGIONAL">SUPERVISOR REGIONAL</option>
                                                <option value="SUPERVISOR DE PROYECTO">SUPERVISOR DE PROYECTO</option>
                                                <option value="LIDER DE SORTEO">LIDER DE SORTEO</option>
                                                <option value="CHOFER">CHOFER</option>
                                                <option value="VIGILANTE">VIGILANTE</option>
                                                <option value="RESIDENTE">RESIDENTE</option>
                                                <option value="ENCARGADO">ENCARGADO</option>
                                                <option value="JEFE DE CAPACITACION">JEFE DE CAPACITACION</option>
                                                <option value="COORDINADOR DE EQUIPO SWAT">COORDINADOR DE EQUIPO SWAT
                                                </option>
                                                <option value="TECNICO DE CALIDAD">TECNICO DE CALIDAD</option>
                                                <option value="CEO">CEO</option>
                                                <option value="INSPECTOR">INSPECTOR</option>
                                                <option value="OTROS">OTROS</option>
                                            </select>
                                        </div>
                                        <!-- Más campos laborales... -->
                                        <div class="form-group">
                                            <label for="reclutador">Reclutador</label>
                                            <select id="reclutador" required name="reclutador">
                                                <option value="" disabled selected>Seleccione una opción</option>
                                                <option value="DELGADO PATIÑO LESLI ESTEFANIA">DELGADO PATIÑO LESLI
                                                    ESTEFANIA</option>
                                                <option value="LAGUNA BECERRA CARLOS DANIEL">LAGUNA BECERRA CARLOS
                                                    DANIEL</option>
                                                <option value="MACIAS RAMIREZ LAURA CECILIA">MACIAS RAMIREZ LAURA
                                                    CECILIA</option>
                                                <option value="MARTINEZ HERNANDEZ JOSE JAVIER">MARTINEZ HERNANDEZ JOSE
                                                    JAVIER</option>
                                                <option value="ROCHA CASTILLO PATRICIA MARIA">ROCHA CASTILLO PATRICIA
                                                    MARIA</option>
                                                <option value="RODRIGUEZ PALACIOS MONICA YOVANA">RODRIGUEZ PALACIOS
                                                    MONICA YOVANA</option>
                                                <option value="ROMERO SANCHEZ ULISES ARTURO">ROMERO SANCHEZ ULISES
                                                    ARTURO</option>
                                                <option value="TENORIO GONZALEZ CAROLA MARILU">TENORIO GONZALEZ CAROLA
                                                    MARILU</option>
                                                <option value="GUZMAN ALONZO MARIA FERNANDA">GUZMAN ALONZO MARIA
                                                    FERNANDA</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Sección de Observaciones -->
                                <div class="form-section">
                                    <h2 class="section-title">Observaciones</h2>
                                    <textarea id="observaciones" rows="4" name="observaciones"
                                        placeholder="Ingrese cualquier observación adicional aquí..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer" style="justify-content: center;">
                            <!-- <button type="button" class="btn btn-outline">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="icon">
                                    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z">
                                    </path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                </svg>
                                Adjuntar Expediente
                            </button> -->
                            <button type="submit" id="btnGuardarRegistro" class="btn btn-primary">Guardar
                                Registro</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tab 2: Acta Administrativa -->
            <div id="tab-acta" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Acta Administrativa</h2>
                        <p class="card-description">Registre una nueva acta administrativa</p>
                    </div>
                    <div class="card-content">
                        <form id="actaForm">
                            <div class="form-sections">
                                <div class="form-section">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="acta_id">ID</label>
                                            <input type="text" id="acta_id" placeholder="Ej. ACT-2024-001">
                                        </div>
                                        <div class="form-group">
                                            <label for="acta_nombre">Nombre del Empleado</label>
                                            <input type="text" id="acta_nombre" placeholder="Nombre completo">
                                        </div>
                                        <div class="form-group">
                                            <label for="acta_fecha">Fecha</label>
                                            <input type="text" id="acta_fecha" class="date-input" value="13/12/2024"
                                                readonly>
                                        </div>
                                        <div class="form-group form-group-wide">
                                            <label for="acta_descripcion">Descripción</label>
                                            <textarea id="acta_descripcion" rows="8"
                                                placeholder="Describa detalladamente los motivos del acta administrativa..."></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="card-footer">
                        <button type="button" class="btn btn-outline">Cancelar</button>
                        <button type="button" class="btn btn-primary">Registrar Acta</button>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Baja de Personal -->
            <div id="tab-baja" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Baja de Personal</h2>
                        <p class="card-description">Gestione las bajas de personal</p>
                    </div>
                    <div class="card-content">
                        <div class="search-container">
                            <input type="text" id="baja_search" placeholder="Buscar empleado por nombre..."
                                class="search-input">
                            <button type="button" class="btn btn-search-inline">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="icon">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                                Buscar
                            </button>
                        </div>

                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nombre</th>
                                        <th>Puesto</th>
                                        <th>Departamento</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>EMP001</td>
                                        <td>Juan Pérez González</td>
                                        <td>INSPECTOR DE CALIDAD</td>
                                        <td>AGUASCALIENTES</td>
                                        <td>
                                            <button type="button" class="btn btn-danger btn-sm" data-employee="EMP001"
                                                data-action="baja">
                                                Dar de Baja
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>EMP002</td>
                                        <td>María Rodríguez López</td>
                                        <td>GERENTE</td>
                                        <td>RECURSOS HUMANOS</td>
                                        <td>
                                            <button type="button" class="btn btn-danger btn-sm" data-employee="EMP002"
                                                data-action="baja">
                                                Dar de Baja
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>EMP003</td>
                                        <td>Carlos Sánchez Martínez</td>
                                        <td>SUPERVISOR</td>
                                        <td>FINANZAS</td>
                                        <td>
                                            <button type="button" class="btn btn-danger btn-sm" data-employee="EMP003"
                                                data-action="baja">
                                                Dar de Baja
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal para Baja de Personal -->
    <div id="modalBaja" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Confirmar Baja de Personal</h2>
                <button type="button" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Está a punto de dar de baja a <strong id="nombreEmpleadoBaja">Nombre del Empleado</strong>.</p>
                <div class="form-group">
                    <label for="motivo_baja">Motivo de la Baja</label>
                    <select id="motivo_baja">
                        <option value="" selected disabled>Seleccione un motivo</option>
                        <option value="renuncia">Renuncia Voluntaria</option>
                        <option value="despido">Despido</option>
                        <option value="termino_contrato">Término de Contrato</option>
                        <option value="jubilacion">Jubilación</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div class="form-group" id="otro_motivo_container" style="display: none;">
                    <label for="otro_motivo">Especifique el Motivo</label>
                    <textarea id="otro_motivo" rows="3" placeholder="Describa el motivo de la baja..."></textarea>
                </div>
                <div class="form-group">
                    <label for="fecha_baja">Fecha Efectiva de Baja</label>
                    <input type="text" id="fecha_baja" class="date-input" value="13/12/2024" readonly>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" id="cancelarBaja">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmarBaja">Confirmar Baja</button>
            </div>
        </div>
    </div>

    <!-- Modal para Buscar Empleado -->
    <div id="modalBuscarEmpleado" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 class="modal-title">Buscar Empleado</h2>
                <button type="button" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="search-container">
                    <input type="text" id="empleado_search" placeholder="Buscar empleado por nombre o ID..."
                        class="search-input">
                    <button type="button" class="btn btn-search-inline">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="icon">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        Buscar
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Puesto</th>
                                <th>Departamento</th>
                                <th>Fecha Alta</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>EMP001</td>
                                <td>Juan Pérez González</td>
                                <td>INSPECTOR DE CALIDAD</td>
                                <td>AGUASCALIENTES</td>
                                <td>01/06/2023</td>
                                <td>
                                    <button type="button" class="btn btn-primary btn-sm" data-employee="EMP001"
                                        data-action="ver">
                                        Ver Detalles
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>EMP002</td>
                                <td>María Rodríguez López</td>
                                <td>GERENTE</td>
                                <td>RECURSOS HUMANOS</td>
                                <td>15/03/2022</td>
                                <td>
                                    <button type="button" class="btn btn-primary btn-sm" data-employee="EMP002"
                                        data-action="ver">
                                        Ver Detalles
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>EMP003</td>
                                <td>Carlos Sánchez Martínez</td>
                                <td>SUPERVISOR</td>
                                <td>FINANZAS</td>
                                <td>10/09/2023</td>
                                <td>
                                    <button type="button" class="btn btn-primary btn-sm" data-employee="EMP003"
                                        data-action="ver">
                                        Ver Detalles
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>EMP004</td>
                                <td>Ana López Torres</td>
                                <td>INSPECTOR DE CALIDAD</td>
                                <td>AGUASCALIENTES</td>
                                <td>22/11/2023</td>
                                <td>
                                    <button type="button" class="btn btn-primary btn-sm" data-employee="EMP004"
                                        data-action="ver">
                                        Ver Detalles
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>EMP005</td>
                                <td>Roberto Gómez Bolaños</td>
                                <td>SUPERVISOR</td>
                                <td>RECURSOS HUMANOS</td>
                                <td>05/02/2024</td>
                                <td>
                                    <button type="button" class="btn btn-primary btn-sm" data-employee="EMP005"
                                        data-action="ver">
                                        Ver Detalles
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" id="cerrarBusqueda">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Ver Detalles de Empleado -->
    <div id="modalDetallesEmpleado" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Detalles del Empleado</h2>
                <button type="button" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="employee-details">
                    <div class="detail-row">
                        <div class="detail-label">ID:</div>
                        <div class="detail-value" id="detalle_id">EMP001</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Nombre:</div>
                        <div class="detail-value" id="detalle_nombre">Juan Pérez González</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">CURP:</div>
                        <div class="detail-value" id="detalle_curp">PEGJ850101HDFRNL09</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Fecha Nacimiento:</div>
                        <div class="detail-value" id="detalle_fecha_nac">01/01/1985</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Puesto:</div>
                        <div class="detail-value" id="detalle_puesto">INSPECTOR DE CALIDAD</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Departamento:</div>
                        <div class="detail-value" id="detalle_departamento">AGUASCALIENTES</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Fecha Alta:</div>
                        <div class="detail-value" id="detalle_fecha_alta">01/06/2023</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Teléfono:</div>
                        <div class="detail-value" id="detalle_telefono">449-123-4567</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Correo:</div>
                        <div class="detail-value" id="detalle_correo">juan.perez@empresa.com</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Dirección:</div>
                        <div class="detail-value" id="detalle_direccion">Calle Principal #123, Centro, Aguascalientes
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" id="cerrarDetalles">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- <script src="script.js"></script> -->
</body>


<script>


    // const apikey = process.env.API_KEY
    // process.env.BD_USER
    const btnGuardarRegistro = document.getElementById('btnGuardarRegistro')
    const selDep = document.getElementById('dropdown1')
    const listaProcesos = document.getElementById('dropdown2')
    const inpPU = document.getElementById('dropdown3')
    const cpdomicilio = document.getElementById('cp_domicilio')
    const registrationForm = document.getElementById('registrationForm')
    var option1, option2, option3, option4, c1

    const fechaAlta = document.getElementById('fecha_alta')

    function limpiar() {
        while (listaProcesos.firstChild) {
            listaProcesos.removeChild(listaProcesos.firstChild);
        }
    }
    function limpiar2() {
        while (colonia.firstChild) {
            colonia.removeChild(colonia.firstChild);
        }
    }
    var puestoV = ""

    fechaAlta.addEventListener('change', () => {
        const fechaAlta2 = document.getElementById('fecha_alta')
        const btnGuardarRegistro2 = document.getElementById('btnGuardarRegistro')
        const fechaSeleccionada = new Date(fechaAlta2.value);
        const fechaActual = new Date();
        const mensajeError = document.getElementById("mensajeError");


        // Normaliza las horas para evitar problemas con la zona horaria
        fechaSeleccionada.setHours(0, 0, 0, 0);
        fechaActual.setHours(0, 0, 0, 0);






        // Calcular los límites de comparación
        const tresDiasAntes = new Date(fechaActual);
        tresDiasAntes.setDate(fechaActual.getDate() - 3);

        const tresDiasDespues = new Date(fechaActual);
        tresDiasDespues.setDate(fechaActual.getDate() + 3);

        if (fechaSeleccionada < tresDiasAntes || fechaSeleccionada > tresDiasDespues) {
        mensajeError.style.display = "inline";
        fechaAlta2.classList.add("error"); 
        event.preventDefault(); // Evita el envío del formulario
    } else {
        mensajeError.style.display = "none";
        fechaAlta2.classList.remove("error");
    }


        // btnGuardarRegistro
    })

    cpdomicilio.addEventListener('focusout', async () => {
        limpiar2()
        if (cpdomicilio.value.length == 5) {
            const cp = cpdomicilio.value;
            const url = `https://mexico-zip-codes.p.rapidapi.com/codigo_postal/${cp}`;
            const options = {
                method: 'GET',
                headers: {
                    'x-rapidapi-key': 'aee217fde7msh4e7ff4c582c6079p126e89jsnb0959410ac54',
                    'x-rapidapi-host': 'mexico-zip-codes.p.rapidapi.com'
                }
            };

            try {
                const response = await fetch(url, options);
                const result = await JSON.parse(await response.text());
                console.log(result);
                const colonia = document.getElementById('colonia')
                const municipio = document.getElementById('municipio')
                municipio.value = result.municipio
                // console.log(result.municipio);

                const estado = document.getElementById('estado_domicilio')
                estado.value = result.estado
                // console.log(result.estado);
                for (let index = 0; index < result.colonias.length; index++) {

                    option1 = document.createElement('option')
                    option1.textContent = result.colonias[index]
                    option1.value = result.colonias[index]
                    // option1.classList.add('listaProc')
                    colonia.appendChild(option1)
                }

            } catch (error) {
                console.error(error);
            }
        }
    })

    inpPU.addEventListener('change', () => {
        switch (inpPU.selectedIndex) {
            case 1:
            case 2:
            case 3:
            case 4:
                puestoV = inpPU.value + " DE " + listaProcesos.value
                break;

            default:
                puestoV = inpPU.value
                break;
        }

        // console.log(puestoV, listaProcesos.value);

    })

    selDep.addEventListener('change', () => {
        limpiar();
        listaProcesos.disabled = false
        inpPU.disabled = false
        // console.log('Boton presionado', selDep.selectedIndex);
        var selectedOption = selDep.selectedIndex;
        switch (selectedOption) {
            case 1:
                option1 = document.createElement('option')
                option1.textContent = "FACTURACION Y COBRANZA"
                option1.value = "FACTURACION Y COBRANZA"
                option1.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                break;
            case 2:
                option1 = document.createElement('option')
                option1.textContent = "COMERCIALIZACION Y VENTAS"
                option1.value = "COMERCIALIZACION Y VENTAS"
                option1.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                break;
            case 3:
                option1 = document.createElement('option')
                option1.textContent = "CONTROL Y MEJORA DEL SERVICIO"
                option1.value = "CONTROL Y MEJORA DEL SERVICIO"
                option1.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                break;
            case 4:
                option1 = document.createElement('option')
                option2 = document.createElement('option')
                option1.textContent = "EJECUCION DEL SERIVCIO"
                option2.textContent = "CAPTURACION"
                option1.value = "EJECUCION DEL SERIVCIO"
                option2.value = "CAPTURACION"
                option1.classList.add('listaProc')
                option2.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                listaProcesos.appendChild(option2)
                break;
            case 5:
                option1 = document.createElement('option')
                option2 = document.createElement('option')
                option3 = document.createElement('option')
                option1.textContent = "ACH"
                option2.textContent = "GCH"
                option3.textContent = "NOMINAS"
                option1.value = "ACH"
                option2.value = "GCH"
                option3.value = "NOMINAS"
                option1.classList.add('listaProc')
                option2.classList.add('listaProc')
                option3.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                listaProcesos.appendChild(option2)
                listaProcesos.appendChild(option3)
                break;
            case 6:
                option1 = document.createElement('option')
                option2 = document.createElement('option')
                option3 = document.createElement('option')
                option4 = document.createElement('option')
                option1.textContent = "COMPRAS"
                option2.textContent = "GASTOS"
                option3.textContent = "LOGISTICA VEHICULAR"
                option4.textContent = "TECNOLOGIAS DE LA INFORMACION"
                option1.value = "COMPRAS"
                option2.value = "GASTOS"
                option3.value = "LOGISTICA VEHICULAR"
                option4.value = "TECNOLOGIAS DE LA INFORMACION"
                option1.classList.add('listaProc')
                option2.classList.add('listaProc')
                option3.classList.add('listaProc')
                option4.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                listaProcesos.appendChild(option2)
                listaProcesos.appendChild(option3)
                listaProcesos.appendChild(option4)
                break;
            case 7:
                option1 = document.createElement('option')
                option1.textContent = "SERVICIO AL CLIENTE"
                option1.value = "SERVICIO AL CLIENTE"
                option1.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                break;
            case 8:
                option1 = document.createElement('option')
                option1.textContent = "ALTA DIRECCION"
                option1.value = "ALTA DIRECCION"
                option1.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                break;
            case 9:
                option1 = document.createElement('option')
                option1.textContent = "SISTEMA DE GESTION DE CALIDAD"
                option1.value = "SISTEMA DE GESTION DE CALIDAD"
                option1.classList.add('listaProc')
                listaProcesos.appendChild(option1)
                break;
        }
    })

    document.addEventListener('DOMContentLoaded', function () {
        // Navegación entre pestañas
        const tabLinks = document.querySelectorAll('.nav-link');
        const tabContents = document.querySelectorAll('.tab-content');

        tabLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();

                // Desactivar todas las pestañas
                tabLinks.forEach(tab => tab.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));

                // Activar la pestaña seleccionada
                this.classList.add('active');
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Manejo del modal de baja
        const btnsBaja = document.querySelectorAll('[data-action="baja"]');
        const modalBaja = document.getElementById('modalBaja');
        const nombreEmpleadoBaja = document.getElementById('nombreEmpleadoBaja');
        const motivoBaja = document.getElementById('motivo_baja');
        const otroMotivoContainer = document.getElementById('otro_motivo_container');
        const btnCancelarBaja = document.getElementById('cancelarBaja');
        const btnConfirmarBaja = document.getElementById('confirmarBaja');
        const modalCloseBaja = modalBaja.querySelector('.modal-close');

        btnsBaja.forEach(btn => {
            btn.addEventListener('click', function () {
                const employeeId = this.getAttribute('data-employee');
                // En una implementación real, aquí se buscaría el nombre del empleado en una base de datos
                // Para este ejemplo, usamos el texto del elemento padre (celda) anterior
                const employeeName = this.closest('tr').querySelector('td:nth-child(2)').textContent;

                nombreEmpleadoBaja.textContent = employeeName;
                modalBaja.classList.add('active');
                document.body.style.overflow = 'hidden'; // Evitar scroll en el fondo
            });
        });

        motivoBaja.addEventListener('change', function () {
            if (this.value === 'otro') {
                otroMotivoContainer.style.display = 'block';
            } else {
                otroMotivoContainer.style.display = 'none';
            }
        });

        function cerrarModalBaja() {
            modalBaja.classList.remove('active');
            document.body.style.overflow = '';
            motivoBaja.value = '';
            otroMotivoContainer.style.display = 'none';
        }

        btnCancelarBaja.addEventListener('click', cerrarModalBaja);
        modalCloseBaja.addEventListener('click', cerrarModalBaja);

        btnConfirmarBaja.addEventListener('click', function () {
            if (!motivoBaja.value) {
                alert('Por favor seleccione un motivo de baja.');
                return;
            }

            // Aquí se implementaría la lógica para procesar la baja
            alert('Empleado dado de baja correctamente.');
            cerrarModalBaja();
        });

        // Manejo del modal de búsqueda de empleado
        const btnBuscarEmpleado = document.getElementById('btnBuscarEmpleado');
        const modalBuscarEmpleado = document.getElementById('modalBuscarEmpleado');
        const btnCerrarBusqueda = document.getElementById('cerrarBusqueda');
        const modalCloseBusqueda = modalBuscarEmpleado.querySelector('.modal-close');

        btnBuscarEmpleado.addEventListener('click', function () {
            modalBuscarEmpleado.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        function cerrarModalBusqueda() {
            modalBuscarEmpleado.classList.remove('active');
            document.body.style.overflow = '';
        }

        btnCerrarBusqueda.addEventListener('click', cerrarModalBusqueda);
        modalCloseBusqueda.addEventListener('click', cerrarModalBusqueda);

        // Manejo del modal de detalles de empleado
        const btnsVerDetalles = document.querySelectorAll('[data-action="ver"]');
        const modalDetallesEmpleado = document.getElementById('modalDetallesEmpleado');
        const btnCerrarDetalles = document.getElementById('cerrarDetalles');
        const modalCloseDetalles = modalDetallesEmpleado.querySelector('.modal-close');

        btnsVerDetalles.forEach(btn => {
            btn.addEventListener('click', function () {
                const employeeId = this.getAttribute('data-employee');
                // En una implementación real, aquí se cargarían los datos del empleado desde una base de datos
                // Para este ejemplo, usamos datos estáticos

                // Simulamos la carga de datos
                setTimeout(() => {
                    modalDetallesEmpleado.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }, 300);
            });
        });

        function cerrarModalDetalles() {
            modalDetallesEmpleado.classList.remove('active');
            document.body.style.overflow = '';
        }

        btnCerrarDetalles.addEventListener('click', cerrarModalDetalles);
        modalCloseDetalles.addEventListener('click', cerrarModalDetalles);

        // Funcionalidad de búsqueda
        const searchInputs = document.querySelectorAll('.search-input');
        const searchButtons = document.querySelectorAll('.btn-search-inline');

        searchButtons.forEach((btn, index) => {
            btn.addEventListener('click', function () {
                const searchTerm = searchInputs[index].value.trim().toLowerCase();
                if (!searchTerm) {
                    alert('Por favor ingrese un término de búsqueda.');
                    return;
                }

                // Aquí se implementaría la lógica de búsqueda real
                alert(`Buscando: "${searchTerm}"`);
            });
        });

        // Cerrar modales al hacer clic fuera del contenido
        window.addEventListener('click', function (e) {
            if (e.target === modalBaja) {
                cerrarModalBaja();
            } else if (e.target === modalBuscarEmpleado) {
                cerrarModalBusqueda();
            } else if (e.target === modalDetallesEmpleado) {
                cerrarModalDetalles();
            }
        });
    });

    registrationForm.addEventListener('submit', function (e) {
        e.preventDefault();
        const inpPuesto = document.getElementById('dropdown3')
        const listaProcesos2 = document.getElementById('dropdown2')
        const formData = new FormData(registrationForm)
        let vPuesto = ''

        if (inpPuesto.selectedIndex > 4) {
            vPuesto = inpPuesto.value
        } else {
            vPuesto = inpPuesto.value + ' ' + listaProcesos2.value
        }

        formData.append('puesto', vPuesto);
        const urlEncoded = new URLSearchParams(formData).toString();
        // console.log(urlEncoded);

        Swal.fire({
            title: 'Enviando Datos',
            allowOutsideClick: false,
            html: `
                <div class="container" style='display: flex; justify-content: space-around;'>
      <div class="circle"></div>
    </div>

    <style>
.circle {
margin-top: 20px;
margin-bottom: 20px;
  box-sizing: border-box;
  width: 80px;
  height: 80px;
  border-radius: 100%;
  border: 10px solid rgba(255, 255, 255, 0.2);
  border-top-color: #ff0000;
  animation: spin 1s infinite linear;
}
@keyframes spin { 
  100% { 
    transform: rotate(360deg); 
  } 
} 
</style>
            `,
            showConfirmButton: false

        })

        fetch(`altagch`, {
            method: 'POST',
            body: urlEncoded,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            }
        })
            .then(response => response.json())
            .then(res => {
                Swal.close()
                // console.log(res);
                if (res.ok) {
                    Swal.fire({
                        title: res.msg,
                        text: "Registro Guardado",
                        icon: "success",
                        allowOutsideClick: false,
                        button: "OK"
                    }).then((value) => {
                        if (value) {
                            window.location.href = "altagch"
                        }
                    });;
                } else {
                    Swal.fire({
                        title: res.msg,
                        icon: "error",
                        text: "Error al guardar el registro",
                        allowOutsideClick: false,
                        button: "OK"
                    });
                }
            })
    })

</script>