<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Llenado R치pido</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">
    <div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-6xl grid grid-cols-1 md:grid-cols-2 gap-8">

        <!-- Formulario -->
        <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Llenado de Personal</h2>
            <form id="formulario" class="space-y-4">
                <div>
                    <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                    <input type="text" id="nombre" name="nombre" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <label for="matriz" class="block text-sm font-medium text-gray-700 mb-1">Matriz ILU</label>
                    <select id="matriz" name="matriz" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="" disabled selected>Selecciona una matriz</option>
                        <option value="I">I</option>
                        <option value="L">L</option>
                        <option value="U">U</option>
                    </select>
                </div>

                <div>
                    <label for="planta" class="block text-sm font-medium text-gray-700 mb-1">Planta</label>
                    <select id="planta" name="planta" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="" disabled>Selecciona una planta</option>
                        <option value="BODEGA CC1">BODEGA CC1</option>
                    </select>
                </div>

                <div>
                    <label for="cotizacion" class="block text-sm font-medium text-gray-700 mb-1">Cotizaci칩n</label>
                    <select id="cotizacion" name="cotizacion" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="">Selecciona una cotizaci칩n</option>
                        <% for (const [key, datos] of Object.entries(rCotizacionesCC1)) { %>
                            <option value="<%= datos.numeroCotizacion %>">
                                <%= datos.numeroCotizacion %>
                            </option>
                            <% } %>
                    </select>
                </div>

                <div class="pt-4 text-center">
                    <button type="button" id="btnRegistrar"
                        class="bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition">
                        Registrar
                    </button>
                </div>
            </form>
        </div>

        <!-- Lista de Personas -->
        <div>
            <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">Personas Agregadas</h2>
            <div id="lista" class="space-y-3 max-h-[500px] overflow-y-auto"></div>
            <div class="pt-4 text-center">
                <button type="button" style="display: none;" id="btnGuardar" class="bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition">
                    Guardar
                </button>
            </div>
        </div>

    </div>

    <script>
        const formulario = document.getElementById('formulario');
        const lista = document.getElementById('lista');
        const btnRegistrar = document.getElementById('btnRegistrar');
        const btnGuardar = document.getElementById('btnGuardar');

        let personas = [];

        btnRegistrar.addEventListener('click', function (e) {
            e.preventDefault();

            const nombre = formulario.nombre.value;
            const matriz = formulario.matriz.value;
            const planta = formulario.planta.value;
            const cotizacion = formulario.cotizacion.value;
            btnGuardar.style.display = 'block';
            personas.push({ nombre, matriz, planta, cotizacion });
            mostrarPersonas();
            formulario.reset();
        });

        function mostrarPersonas() {
            lista.innerHTML = '';
            personas.forEach((persona, index) => {
                lista.innerHTML += `
          <div class="border border-gray-300 rounded-lg p-4 bg-gray-50">
            <div><strong>Nombre:</strong> <span contenteditable onblur="actualizar(${index}, 'nombre', this.innerText)">${persona.nombre}</span></div>
            <div><strong>Matriz:</strong> <span contenteditable onblur="actualizar(${index}, 'matriz', this.innerText)">${persona.matriz}</span></div>
            <div><strong>Planta:</strong> <span contenteditable onblur="actualizar(${index}, 'planta', this.innerText)">${persona.planta}</span></div>
            <div><strong>Cotizaci칩n:</strong> <span contenteditable onblur="actualizar(${index}, 'cotizacion', this.innerText)">${persona.cotizacion}</span></div>
          </div>
        `;
            });
        }

        function actualizar(index, campo, valor) {
            personas[index][campo] = valor.trim();
        }
    </script>
</body>

</html>